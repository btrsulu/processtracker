<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTr Sulu FB Process Tracker</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background-color: #ffffff; }
        iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; visibility: hidden; }
    </style>
</head>
<body>

    <iframe 
        id="main-app"
        allow="clipboard-write;"
        title="Process Tracker">
    </iframe>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const iframe = document.getElementById('main-app');
            const baseUrl = "https://script.google.com/macros/s/AKfycby6fQVerVdRwpCtXQR1A7d2QrfZpENN5ub05JmDrTM-oQpCft2hBJBUpJUvXIRB2ZeTRQ/exec";
            
            // Get page from GitHub URL (e.g., yoursite.github.io/?p=fidelity)
            const params = new URLSearchParams(window.location.search);
            const pageName = params.get('p') || "login"; // Default to login if empty

            // Construct the final GAS URL
            const finalUrl = `${baseUrl}?page=${pageName}`;

            // Set the source and show the iframe only after it's assigned
            iframe.src = finalUrl;
            iframe.style.visibility = "visible";
            
            console.log("Loading page: " + finalUrl);
        });
    </script>
</body>
</html>
